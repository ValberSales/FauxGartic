syntax = "proto3";

// Define o pacote Java onde as classes geradas vão ficar
option java_package = "org.fauxgartic.grpc";
option java_multiple_files = true;

// MUDANÇA: Nome do serviço atualizado para FauxGarticService
service FauxGarticService {
  rpc EntrarNoJogo (Jogador) returns (EstadoDoJogo);
  rpc ReceberEventos (Jogador) returns (stream EventoDeJogo);
  rpc EnviarAcao (AcaoJogador) returns (Vazio);
}

// --- Mensagens (Dados) ---

message Jogador {
  string nome = 1;
  string id = 2;
}

message EstadoDoJogo {
  bool sou_o_desenhista = 1;
  string desenhista_atual = 2;
  string palavra_atual = 3;
}

message AcaoJogador {
  Jogador jogador = 1;
  oneof acao {
    Traco traco = 2;
    string palpite = 3;
    bool limpar_tela = 4;
  }
}

message Traco {
  double x = 1;
  double y = 2;
  string cor = 3;
  bool novo_traco = 4; // True = Clique (START), False = Arrastar (DRAW)
}

message EventoDeJogo {
  oneof evento {
    Traco desenho = 1;
    string mensagem_chat = 2;
    Rodada mudanca_rodada = 3;
    bool limpar_tela = 4;
  }
}

message Rodada {
  string nome_desenhista = 1;
  string palavra_secreta = 2;
}

message Vazio {}